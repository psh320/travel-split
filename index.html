<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/coin.svg" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no"
    />

    <!-- Primary Meta Tags -->
    <title>Split Expenses Online Free - Easy Bill Splitting Calculator</title>
    <meta
      name="description"
      content="Split expenses online free with friends and groups. Easy bill splitting calculator for shared costs, travel expenses, and group spending. No registration required - start splitting expenses instantly!"
    />
    <meta
      name="keywords"
      content="split expenses online, split expense online free, split costs online, bill splitting calculator, expense splitting app, split expenses free, online expense splitter, group expense calculator, shared expense tracker, split bills online, expense sharing tool"
    />
    <meta name="robots" content="index, follow" />
    <meta name="author" content="Split Expense App" />
    <meta
      name="google-site-verification"
      content="T0xds5i4wDvQYs4v4j_JsS6z51XxkTnlhS-AWxiX8YE"
    />
    <link rel="canonical" href="https://splitexpense.web.app/" />
    <link rel="sitemap" type="application/xml" href="/sitemap.xml" />

    <!-- Open Graph Meta Tags for Social Sharing -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Split Expense" />
    <meta
      property="og:title"
      content="Split Expenses Online Free - Easy Bill Splitting Calculator"
    />
    <meta
      property="og:description"
      content="Split expenses online free with friends and groups. Easy bill splitting calculator for shared costs, travel expenses, and group spending. No registration required!"
    />
    <meta property="og:url" content="https://splitexpense.web.app/" />
    <meta
      property="og:image"
      content="https://splitexpense.web.app/icons/app-icon.svg"
    />
    <meta property="og:image:width" content="512" />
    <meta property="og:image:height" content="512" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Split Expenses Online Free - Easy Bill Splitting Calculator"
    />
    <meta
      name="twitter:description"
      content="Split expenses online free with friends and groups. Easy bill splitting calculator for shared costs, travel expenses, and group spending. No registration required!"
    />
    <meta
      name="twitter:image"
      content="https://splitexpense.web.app/icons/app-icon.svg"
    />
    <meta name="twitter:site" content="@splitexpense" />

    <!-- Additional SEO Meta Tags -->
    <meta name="geo.region" content="US" />
    <meta name="geo.placename" content="United States" />
    <meta name="geo.position" content="39.78373;-100.445882" />
    <meta name="ICBM" content="39.78373, -100.445882" />

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Split Expense",
        "alternateName": [
          "Split Expenses Online",
          "Bill Splitting Calculator",
          "Expense Splitter"
        ],
        "url": "https://splitexpense.web.app/",
        "description": "Split expenses online free with friends and groups. Easy bill splitting calculator for shared costs, travel expenses, and group spending. No registration required.",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web Browser",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "featureList": [
          "Split expenses online free",
          "Bill splitting calculator",
          "Group expense tracking",
          "Travel expense splitting",
          "No registration required",
          "Real-time collaboration",
          "Minimal transaction optimization"
        ],
        "screenshot": "https://splitexpense.web.app/icons/app-icon.svg",
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "reviewCount": "127"
        },
        "author": {
          "@type": "Organization",
          "name": "Split Expense Team"
        },
        "creator": {
          "@type": "Organization",
          "name": "Split Expense Team"
        },
        "provider": {
          "@type": "Organization",
          "name": "Split Expense",
          "url": "https://splitexpense.web.app/"
        }
      }
    </script>

    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7682850870038833"
      crossorigin="anonymous"
    ></script>

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#667eea" />
    <meta name="background-color" content="#ffffff" />
    <meta name="display" content="standalone" />

    <!-- iOS Specific Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="apple-mobile-web-app-orientation" content="portrait" />
    <meta name="apple-mobile-web-app-title" content="Split Expense" />
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-180x180.png" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/icons/apple-touch-icon-180x180.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="/icons/apple-touch-icon-152x152.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="/icons/apple-touch-icon-144x144.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="/icons/apple-touch-icon-120x120.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="/icons/apple-touch-icon-114x114.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="/icons/apple-touch-icon-76x76.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="/icons/apple-touch-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="/icons/apple-touch-icon-60x60.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="/icons/apple-touch-icon-57x57.png"
    />

    <!-- Android/Chrome Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="Split Expense" />

    <!-- Microsoft Tile Meta Tags -->
    <meta name="msapplication-TileColor" content="#667eea" />
    <meta name="msapplication-TileImage" content="/icons/app-icon.svg" />
    <meta
      name="msapplication-tooltip"
      content="Split Expense - Share costs easily"
    />

    <!-- Additional PWA Meta Tags -->
    <meta name="format-detection" content="telephone=no" />
    <meta name="HandheldFriendly" content="true" />
    <meta name="MobileOptimized" content="width" />
    <!-- Safari-specific optimizations -->
    <meta name="supported-color-schemes" content="light dark" />
    <meta name="color-scheme" content="light dark" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>

    <!-- Service Worker Registration -->
    <script>
      // Register Service Worker for PWA functionality
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", async () => {
          try {
            // Safari-specific service worker handling
            const registration = await navigator.serviceWorker.register(
              "/sw.js",
              { scope: "/" }
            );
            console.log("SW registered: ", registration);

            // Handle service worker updates
            registration.addEventListener("updatefound", () => {
              const newWorker = registration.installing;
              if (newWorker) {
                newWorker.addEventListener("statechange", () => {
                  if (
                    newWorker.state === "installed" &&
                    navigator.serviceWorker.controller
                  ) {
                    // New version available
                    if (
                      confirm(
                        "New version of Split Expense is available. Refresh to update?"
                      )
                    ) {
                      window.location.reload();
                    }
                  }
                });
              }
            });
          } catch (error) {
            console.log("SW registration failed: ", error);
          }
        });
      }

      // Add to Home Screen prompt handling
      let deferredPrompt;
      let isInstallPromptShown = false;

      window.addEventListener("beforeinstallprompt", (e) => {
        console.log("PWA: Install prompt triggered");
        e.preventDefault();
        deferredPrompt = e;

        // Show custom install banner after 30 seconds if not installed
        setTimeout(() => {
          if (
            !isInstallPromptShown &&
            !window.matchMedia("(display-mode: standalone)").matches
          ) {
            showInstallBanner();
          }
        }, 30000);
      });

      function showInstallBanner() {
        isInstallPromptShown = true;
        const installBanner = document.createElement("div");
        installBanner.id = "install-banner";
        installBanner.style.cssText = `
          position: fixed;
          bottom: 20px;
          left: 20px;
          right: 20px;
          background: #667eea;
          color: white;
          padding: 16px;
          border-radius: 8px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.3);
          z-index: 1000;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', roboto, sans-serif;
          font-size: 14px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        `;

        installBanner.innerHTML = `
          <div>
            <div style="font-weight: 600; margin-bottom: 4px;">📱 Install Split Expense</div>
            <div style="opacity: 0.9; font-size: 12px;">Add to home screen for easy access!</div>
          </div>
          <div>
            <button id="install-btn" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 12px; border-radius: 4px; font-size: 12px; margin-right: 8px; cursor: pointer;">Install</button>
            <button id="dismiss-btn" style="background: none; border: none; color: white; padding: 8px; cursor: pointer; opacity: 0.7;">✕</button>
          </div>
        `;

        document.body.appendChild(installBanner);

        // Install button click
        document
          .getElementById("install-btn")
          .addEventListener("click", async () => {
            if (deferredPrompt) {
              deferredPrompt.prompt();
              const result = await deferredPrompt.userChoice;
              console.log("PWA install result:", result);
              deferredPrompt = null;
            }
            installBanner.remove();
          });

        // Dismiss button click
        document.getElementById("dismiss-btn").addEventListener("click", () => {
          installBanner.remove();
        });

        // Auto-dismiss after 10 seconds
        setTimeout(() => {
          if (document.getElementById("install-banner")) {
            installBanner.remove();
          }
        }, 10000);
      }

      // Handle app installation
      window.addEventListener("appinstalled", (evt) => {
        console.log("PWA: App installed successfully");
      });

      // Check if app is running in standalone mode
      if (
        window.matchMedia("(display-mode: standalone)").matches ||
        window.navigator.standalone
      ) {
        console.log("PWA: Running in standalone mode");
        document.documentElement.style.setProperty(
          "--safe-area-inset-top",
          "env(safe-area-inset-top)"
        );
        document.documentElement.style.setProperty(
          "--safe-area-inset-bottom",
          "env(safe-area-inset-bottom)"
        );
      }
    </script>
  </body>
</html>
